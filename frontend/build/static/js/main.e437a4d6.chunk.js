(this["webpackJsonpplawn-pass"]=this["webpackJsonpplawn-pass"]||[]).push([[0],{107:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),l=n(9),c=n.n(l),o=(n(96),n(79)),i=n(28),u=n(20),m=n(147),s=n(136),p=function(e){return e.loading?r.a.createElement("div",{style:{width:"100%",height:"100%",display:"flex",justifyContent:"center",alignItems:"center"}},r.a.createElement(s.a,null)):r.a.createElement(r.a.Fragment,null,e.children)},f=n(140),d=function(e){return r.a.createElement(f.a,Object.assign({},e,{variant:"outlined"}))},b=n(73),v=n.n(b),h=n(141),E=n(74),g=n.n(E),y=function(e){var t=e.string;return r.a.createElement(v.a,{text:t},r.a.createElement(h.a,{component:"span"},r.a.createElement(g.a,null)))},j=n(55),O=n(156),w=function(e){return r.a.createElement(O.a,Object.assign({},e,{inputProps:{style:Object(j.a)({textAlign:"center"},e.style)},variant:"outlined",margin:"dense"}))},k=function(e){var t=e.url;return r.a.createElement("div",{style:{display:"flex"}},r.a.createElement(w,{value:t,style:{width:"100%"},InputProps:{readOnly:!0}}),r.a.createElement(y,{string:t}))},C=n(17),x=n.n(C),S=n(35),N=function(){var e=Object(S.a)(x.a.mark((function e(t,n){var a,r,l,c,o=arguments;return x.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=o.length>2&&void 0!==o[2]?o[2]:1,(r=new Headers).append("Content-Type","application/json"),r.append("Accept","application/json"),e.next=6,fetch("/api/new",{method:"POST",headers:r,body:JSON.stringify({content:t,ttl:n,links_number:a})});case 6:return l=e.sent,e.next=9,l.json();case 9:return c=e.sent,e.abrupt("return",c.tokens);case 11:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),F=function(){var e=Object(S.a)(x.a.mark((function e(t){var n,a;return x.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("/api/preview/".concat(encodeURIComponent(t)));case 2:return n=e.sent,e.next=5,n.json();case 5:return a=e.sent,e.abrupt("return",a.valid);case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),I=function(){var e=Object(S.a)(x.a.mark((function e(t){var n,a;return x.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("/api/view/".concat(encodeURIComponent(t)));case 2:return n=e.sent,e.next=5,n.json();case 5:return a=e.sent,e.abrupt("return",a.content);case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),L=n(144),T=n(154),V=n(151),W=n(155),$=n(108),A=n(152),D=Object($.a)((function(e){return{icon:{color:e.palette.primary.main},root:{color:e.palette.primary.main,display:"flex",flexWrap:"wrap","& $notchedOutline":{borderColor:e.palette.primary.main},"&:hover $notchedOutline":{borderColor:e.palette.primary.main},"&$focused $notchedOutline":{borderColor:e.palette.primary.main}},menuItem:{"&:hover":{backgroundColor:e.palette.primary.main+"8C"}},formControl:{margin:e.spacing(1),width:200},inputLabel:{color:e.palette.primary.main}}})),M=function(e){var t=e.options,n=Object(a.useState)(e.initialValue||""),l=Object(u.a)(n,2),c=l[0],o=l[1],i=Object(a.useMemo)((function(){return t.map((function(e){return{label:e.label,value:e}}))}),[t]),m=D(),s=Object(A.a)();return r.a.createElement(L.a,{variant:"outlined",margin:"dense",className:m.formControl,style:e.style},r.a.createElement(T.a,{classes:{root:m.inputLabel},htmlFor:s},e.label),r.a.createElement(V.a,{id:s,onChange:function(t){return o((n=t).target.value.label||""),e.form&&e.form.setFieldValue(e.field.name,n.target.value.value,!0),void(e.onChange&&e.onChange(n));var n},value:c,classes:{icon:m.icon},renderValue:function(e){return r.a.createElement(r.a.Fragment,null,e.label||e)},label:e.label},i.map((function(e){return r.a.createElement(W.a,{value:e.value,className:m.menuItem,key:e.label},e.label)}))))},P=n(29),J=n(146),R=Object(J.a)({multiLineField:{width:"100%",margin:"1rem 0",background:"none"}}),U=function(e){var t=R();return r.a.createElement(O.a,Object.assign({},e,{className:t.multiLineField,multiline:!0,rowsMax:10,rows:10,variant:"outlined"}))},B=function(e){return r.a.createElement(w,Object.assign({},e.field,e))},H=function(e){return r.a.createElement(U,Object.assign({},e.field,e))},Y=n(82);var _=[{label:"Hour",value:3600},{label:"Day",value:86400},{label:"Week",value:604800},{label:"Never",value:0}],q=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return Object(Y.a)(Array(e).keys()).map((function(e){return e+t}))}(10,1).map((function(e){return{label:"".concat(e),value:e}})),z={ttl:_[0].value,content:"",linksNumber:1},G=function(e){var t=e.setTokens,n=e.setLoading,a=function(){var e=Object(S.a)(x.a.mark((function e(a,r,l){var c;return x.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t([]),n(!0),e.prev=2,e.next=5,N(a,r,l);case 5:c=e.sent,t(c),e.next=11;break;case 9:e.prev=9,e.t0=e.catch(2);case 11:n(!1);case 12:case"end":return e.stop()}}),e,null,[[2,9]])})));return function(t,n,a){return e.apply(this,arguments)}}();return r.a.createElement(r.a.Fragment,null,r.a.createElement(m.a,{variant:"h3"},"Share Secret Data"),r.a.createElement(P.c,{initialValues:z,onSubmit:function(){var e=Object(S.a)(x.a.mark((function e(t){return x.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:void 0!==t.ttl&&a(t.content,+t.ttl,+t.linksNumber);case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),render:function(){return r.a.createElement(P.b,null,r.a.createElement(P.a,{label:"Content",name:"content",placeholder:"Enter your content here",component:H}),r.a.createElement("div",null,r.a.createElement(m.a,{variant:"h6"},"TTL"),r.a.createElement(P.a,{name:"ttl",placeholder:"Duration in seconds",component:B}),r.a.createElement(P.a,{name:"ttl",options:_,label:"ttl",component:M,initialValue:_[0].label})),r.a.createElement("div",null,r.a.createElement(m.a,{variant:"h6"},"Number of links"),r.a.createElement(P.a,{name:"linksNumber",placeholder:"Number of links",component:B}),r.a.createElement(P.a,{name:"linksNumber",options:q,label:"Number of links",component:M})),r.a.createElement("br",null),r.a.createElement(d,{type:"submit"},"Share Secret"))}}))},K=function(e){return document.location.origin+"/view/".concat(encodeURIComponent(e))},Q=Object(a.memo)((function(e){var t=e.urls;return r.a.createElement("div",null,r.a.createElement(m.a,{style:{display:"inline"}},"Copy all"),r.a.createElement(y,{string:t.join("\n")}))})),X=function(){var e=Object(a.useState)([]),t=Object(u.a)(e,2),n=t[0],l=t[1],c=Object(a.useState)(!1),o=Object(u.a)(c,2),i=o[0],m=o[1],s=Object(a.useMemo)((function(){return n.map(K)}),[n]);return r.a.createElement(p,{loading:i},n.length>0?r.a.createElement(r.a.Fragment,null,s.map((function(e){return r.a.createElement(k,{key:e,url:e})})),r.a.createElement("br",null),r.a.createElement(Q,{urls:s}),r.a.createElement("br",null),r.a.createElement(d,{onClick:function(){return l([])}},"Share again")):r.a.createElement(G,{setLoading:m,setTokens:l}))},Z=n(77),ee=n.n(Z),te=function(){return r.a.createElement(m.a,{variant:"h1"},"Invalid "," ",r.a.createElement(ee.a,{htmlColor:"red",style:{height:"95%",width:"13%"}}))},ne=function(e){var t=e.children;return r.a.createElement("span",{style:{fontWeight:"bold"}},t)},ae=n(78),re=n.n(ae),le=function(e){var t=e.token,n=Object(a.useState)(void 0),l=Object(u.a)(n,2),c=l[0],o=l[1],i=Object(a.useState)(!1),s=Object(u.a)(i,2),d=s[0],b=s[1];return r.a.createElement(p,{loading:d},void 0!==c?r.a.createElement(r.a.Fragment,null,r.a.createElement(m.a,{variant:"h3"},"Content"),r.a.createElement(U,{value:c,placeholder:"Empty",InputProps:{readOnly:!0}})):r.a.createElement(r.a.Fragment,null,r.a.createElement(m.a,{variant:"h1"},"Valid "," ",r.a.createElement(re.a,{htmlColor:"green",style:{height:"95%",width:"13%"}})),r.a.createElement("br",null),"Do you want to see the content ?",r.a.createElement("br",null),r.a.createElement("br",null),"You can only see it ",r.a.createElement(ne,null,"once !"),r.a.createElement("br",null),r.a.createElement("br",null),r.a.createElement(f.a,{onClick:function(){b(!0),I(t).then((function(e){return o(e)})).catch((function(){return o("Failed to fetch content")})).finally((function(){return b(!1)}))}},"See Content")))},ce=function(e){var t=e.valid,n=e.token;return t?r.a.createElement(le,{token:n}):r.a.createElement(te,null)},oe=function(e){var t=e.match.params.token,n=Object(a.useState)(!1),l=Object(u.a)(n,2),c=l[0],o=l[1],i=Object(a.useState)(void 0),m=Object(u.a)(i,2),s=m[0],f=m[1],d=Object(a.useCallback)((function(){o(!0),F(t).then((function(e){return f(e)})).catch((function(){return f(!1)})).finally((function(){return o(!1)}))}),[t]);return Object(a.useEffect)((function(){d()}),[d]),console.log(s),r.a.createElement(p,{loading:c||void 0===s},r.a.createElement(ce,{valid:s,token:t}))},ie=n(148),ue=n(145),me=function(e){var t=e.children,n=e.style;return r.a.createElement(ie.a,{container:!0,justify:"center",alignItems:"center",style:{height:"100vh"}},r.a.createElement(ue.a,{style:Object(j.a)({textAlign:"center",padding:"2%",minWidth:"30vw",margin:"1%"},n)},t))},se=function(){return r.a.createElement(me,null,r.a.createElement(o.a,null,r.a.createElement(i.c,null,r.a.createElement(i.a,{path:"/view/:token",component:oe}),r.a.createElement(i.a,{path:"/",component:X}))))},pe=n(81),fe=n(149),de=n(150),be=Object(pe.a)(),ve=function(){return r.a.createElement(fe.a,{theme:be},r.a.createElement(de.a,null),r.a.createElement(se,null))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));c.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(ve,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))},91:function(e,t,n){e.exports=n(107)},96:function(e,t,n){}},[[91,1,2]]]);
//# sourceMappingURL=main.e437a4d6.chunk.js.map